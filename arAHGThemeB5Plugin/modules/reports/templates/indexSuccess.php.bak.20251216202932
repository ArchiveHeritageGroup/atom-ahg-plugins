<?php decorate_with('layout_2col'); ?>

<?php slot('sidebar'); ?>
<div class="sidebar-content">
    <h4><?php echo __('Quick Links'); ?></h4>
    <ul class="list-unstyled">
        <li><a href="<?php echo url_for(['module' => 'export', 'action' => 'archival']); ?>"><i class="fas fa-download me-2"></i><?php echo __('Export Data'); ?></a></li>
        <li><a href="<?php echo url_for(['module' => 'dashboard', 'action' => 'index']); ?>"><i class="fas fa-chart-bar me-2"></i><?php echo __('Data Quality'); ?></a></li>
    </ul>
    
    <h4 class="mt-4"><?php echo __('Compliance'); ?></h4>
    <ul class="list-unstyled">
        <li><a href="/admin/security/compliance"><i class="fas fa-shield-alt me-2"></i><?php echo __('Security'); ?></a></li>
        <li><a href="/admin/privacy/manage"><i class="fas fa-user-shield me-2"></i><?php echo __('Privacy (POPIA)'); ?></a></li>
        <li><a href="/admin/condition"><i class="fas fa-heartbeat me-2"></i><?php echo __('Condition'); ?></a></li>
    </ul>
</div>
<?php end_slot(); ?>

<?php slot('title'); ?>
<h1><i class="fas fa-chart-line"></i> <?php echo __('Reports Dashboard'); ?></h1>
<?php end_slot(); ?>

<?php slot('content'); ?>
<div class="reports-dashboard">
    <!-- Stats Row -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card text-center bg-primary text-white">
                <div class="card-body">
                    <h2 class="mb-0"><?php echo number_format($stats['totalDescriptions'] ?? 0); ?></h2>
                    <p class="mb-0"><?php echo __('Archival Descriptions'); ?></p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center bg-success text-white">
                <div class="card-body">
                    <h2 class="mb-0"><?php echo number_format($stats['totalActors'] ?? 0); ?></h2>
                    <p class="mb-0"><?php echo __('Authority Records'); ?></p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center bg-info text-white">
                <div class="card-body">
                    <h2 class="mb-0"><?php echo number_format($stats['totalDigitalObjects'] ?? 0); ?></h2>
                    <p class="mb-0"><?php echo __('Digital Objects'); ?></p>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center bg-warning text-dark">
                <div class="card-body">
                    <h2 class="mb-0"><?php echo number_format($stats['recentUpdates'] ?? 0); ?></h2>
                    <p class="mb-0"><?php echo __('Updated (7 days)'); ?></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="row mb-4">
        <!-- Reports Column -->
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="fas fa-file-alt me-2"></i><?php echo __('Reports'); ?></h5>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'reports', 'action' => 'descriptions']); ?>"><i class="fas fa-archive me-2 text-muted"></i><?php echo __('Archival Descriptions'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'reports', 'action' => 'authorities']); ?>"><i class="fas fa-users me-2 text-muted"></i><?php echo __('Authority Records'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'reports', 'action' => 'repositories']); ?>"><i class="fas fa-building me-2 text-muted"></i><?php echo __('Repositories'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'reports', 'action' => 'accessions']); ?>"><i class="fas fa-inbox me-2 text-muted"></i><?php echo __('Accessions'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'reports', 'action' => 'storage']); ?>"><i class="fas fa-boxes me-2 text-muted"></i><?php echo __('Physical Storage'); ?></a></li>
                </ul>
            </div>
        </div>

        <!-- Dashboards Column -->
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="fas fa-tachometer-alt me-2"></i><?php echo __('Dashboards'); ?></h5>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'dashboard', 'action' => 'index']); ?>"><i class="fas fa-chart-bar me-2 text-muted"></i><?php echo __('Quality Dashboard'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'spectrum', 'action' => 'dashboard']); ?>"><i class="fas fa-layer-group me-2 text-muted"></i><?php echo __('Spectrum Workflow'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'grap', 'action' => 'dashboard']); ?>"><i class="fas fa-balance-scale me-2 text-muted"></i><?php echo __('GRAP 103 Dashboard'); ?></a></li>
                    <li class="list-group-item"><a href="/admin/condition"><i class="fas fa-heartbeat me-2 text-muted"></i><?php echo __('Condition Management'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'oais', 'action' => 'dashboard']); ?>"><i class="fas fa-archive me-2 text-muted"></i><?php echo __('Digital Preservation (OAIS)'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'research', 'action' => 'dashboard']); ?>"><i class="fas fa-graduation-cap me-2 text-muted"></i><?php echo __('Research Services'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'arGalleryPlugin', 'action' => 'dashboard']); ?>"><i class="fas fa-palette me-2 text-muted"></i><?php echo __('Gallery Management'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'arLibraryPlugin', 'action' => 'browse']); ?>"><i class="fas fa-book me-2 text-muted"></i><?php echo __('Library Management'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'dam', 'action' => 'dashboard']); ?>"><i class="fas fa-images me-2 text-muted"></i><?php echo __('Digital Asset Management'); ?></a></li>
                </ul>
            </div>
        </div>

        <!-- Export Column -->
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="fas fa-download me-2"></i><?php echo __('Export'); ?></h5>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'grap', 'action' => 'export']); ?>"><i class="fas fa-balance-scale me-2 text-muted"></i><?php echo __('GRAP 103 Export'); ?></a></li>
                    <li class="list-group-item"><a href="/spectrum/export"><i class="fas fa-history me-2 text-muted"></i><?php echo __('Spectrum History Export'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'cidoc', 'action' => 'export']); ?>"><i class="fas fa-project-diagram me-2 text-muted"></i><?php echo __('CIDOC-CRM Export'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'export', 'action' => 'csv']); ?>"><i class="fas fa-file-csv me-2 text-muted"></i><?php echo __('CSV Export'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'export', 'action' => 'ead']); ?>"><i class="fas fa-file-code me-2 text-muted"></i><?php echo __('EAD Export'); ?></a></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Compliance Row -->
    <div class="row">
        <!-- Security -->
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0"><i class="fas fa-shield-alt me-2"></i><?php echo __('Security & Compliance'); ?></h5>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <a href="/admin/security/compliance"><i class="fas fa-lock me-2 text-muted"></i><?php echo __('Security Dashboard'); ?></a>
                    </li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'arSecurityClearance', 'action' => 'report']); ?>"><i class="fas fa-user-shield me-2 text-muted"></i><?php echo __('Clearance Report'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'arSecurityAudit', 'action' => 'index']); ?>"><i class="fas fa-clipboard-list me-2 text-muted"></i><?php echo __('Audit Log'); ?></a></li>
                    <li class="list-group-item"><a href="<?php echo url_for(['module' => 'arSecurityAudit', 'action' => 'export']); ?>"><i class="fas fa-download me-2 text-muted"></i><?php echo __('Export Audit Log'); ?></a></li>
                </ul>
            </div>
        </div>

        <!-- Privacy -->
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0"><i class="fas fa-user-shield me-2"></i><?php echo __('Privacy (POPIA/PAIA)'); ?></h5>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <a href="/admin/privacy/manage"><i class="fas fa-tachometer-alt me-2 text-muted"></i><?php echo __('Privacy Dashboard'); ?></a>
                    </li>
                    <li class="list-group-item"><a href="/admin/privacy/ropa"><i class="fas fa-clipboard-list me-2 text-muted"></i><?php echo __('ROPA'); ?></a></li>
                    <li class="list-group-item"><a href="/admin/privacy/dsar"><i class="fas fa-user-clock me-2 text-muted"></i><?php echo __('DSAR Requests'); ?></a></li>
                    <li class="list-group-item"><a href="/admin/privacy/breaches"><i class="fas fa-exclamation-circle me-2 text-muted"></i><?php echo __('Breach Register'); ?></a></li>
                    <li class="list-group-item"><a href="/admin/privacy/templates"><i class="fas fa-file-alt me-2 text-muted"></i><?php echo __('Template Library'); ?></a></li>
                </ul>
            </div>
        </div>

        <!-- Condition -->
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-header bg-secondary text-white">
                    <h5 class="mb-0"><i class="fas fa-heartbeat me-2"></i><?php echo __('Condition (Spectrum 5.0)'); ?></h5>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <a href="/admin/condition"><i class="fas fa-clipboard-check me-2 text-muted"></i><?php echo __('Condition Dashboard'); ?></a>
                    </li>
                    <li class="list-group-item">
                        <a href="/admin/condition/risk"><i class="fas fa-exclamation-triangle me-2 text-muted"></i><?php echo __('Risk Assessment'); ?></a>
                    </li>
                    <li class="list-group-item">
                        <a href="/condition/templates"><i class="fas fa-clipboard me-2 text-muted"></i><?php echo __('Condition Templates'); ?></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<?php end_slot(); ?>
